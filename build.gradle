import org.asciidoctor.gradle.AsciidoctorTask

buildscript {
    repositories {
        jcenter()
    }

    dependencies {
        classpath 'org.asciidoctor:asciidoctorj-pdf:1.5.0-alpha.16'
    }
}
plugins {
  id "org.asciidoctor.convert" version "1.6.0"

}


ext {
    currentDate = new Date().format("d. MMM yyyy")
}

task buildDocs {
	group 'Documentation'
	description 'Grouping task for generating all languages in several formats'
}

asciidoctor {
    
    attributes = [

      icons              : 'font',
    
    ]
    
}

task renderNoRemarksDE(type: AsciidoctorTask, group: 'Documentation') {
    description = '.'
    sourceDir = file("./docs/")
    sources {
      include "template-curriculum.adoc"
    }
    outputDir = file("build/DE")
    backends 'pdf', 'html5'
	attributes = [
       'document-version' : "0.4.2 DRAFT ($currentDate)",
       'withRemarks'      : false,
       'language'         : "DE",
       currentDate        : '$currentDate',
       debug_adoc         : false, 

      // where are the (custom) pdf style definitions and fonts located
      'pdf-stylesdir'    : '../pdf-theme/themes',
      'pdf-style'        : 'isaqb'
    ] 
}


task renderNoRemarksEN(type: AsciidoctorTask, group: 'Documentation') {
    description = '.'
    sourceDir = file("./docs/")
    sources {
      include "template-curriculum.adoc"
    }
    outputDir = file("build/EN")
    backends 'pdf'
	attributes = [
       'document-version' : "0.4.2 DRAFT ($currentDate)",
       'withRemarks'      : false,
       'language'         : "EN",
       currentDate        : '$currentDate',
       debug_adoc         : false, 

      // where are the (custom) pdf style definitions and fonts located
      'pdf-stylesdir'    : '../pdf-theme/themes',
      'pdf-style'        : 'isaqb'
    ]
}


task renderPdfRemarksEN(type: AsciidoctorTask, group: 'Documentation') {
    description = '.'
    sourceDir = file("./docs/")
    sources {
      include "template-curriculum.adoc"
    }
    outputDir = file("build/EN")
    backends 'pdf'
	attributes = [
       'document-version' : "0.4.2 DRAFT ($currentDate)",
       'withRemarks'      : true,
       'language'         : "EN",
       currentDate        : '$currentDate',
       debug_adoc         : false, 

      // where are the (custom) pdf style definitions and fonts located
      'pdf-stylesdir'    : '../pdf-theme/themes',
      'pdf-style'        : 'isaqb'
    ]
}
buildDocs.dependsOn renderNoRemarksDE
buildDocs.dependsOn renderNoRemarksEN
buildDocs.dependsOn renderPdfRemarksEN

